<!-- COLLAPSIBLE NAV -->
{{ define "collapsible_nav" }}
  {{ if .Pages }}
    {{ range .Pages }}
      {{ if .IsSection }}
        <li class="nav__item nav__item--folder">
          <button class="btn btn--collapse">
            <i class="bi bi-folder2"></i>
            <span>{{ .LinkTitle }}</span>
          </button>
          <ul class="nav__list nav__list--collapse">
            {{ template "collapsible_nav" . }}
          </ul>
        </li>
      {{ end }}
    {{ end }}
    {{ range .Pages }}
      {{ if .IsPage }}
        <li class="nav__item nav__item--file">
          <a class="nav__link" href="{{ .RelPermalink }}">
            <i class="bi bi-file-earmark-text"></i>
            <span>{{ .LinkTitle }}</span>
          </a>
        </li>
      {{ end }}
    {{ end }}
  {{ end }}
{{ end }}
<!-- COLLAPSIBLE NAV -->

<!-- CATEGORIES -->
{{ define "categories_list" }}
  {{ $categories := slice }}
  
  {{ range $name, $taxonomy := .Site.Taxonomies.categories }}
    {{ $categories = $categories | append (dict "name" $name "pages" (len $taxonomy) "taxonomy" $taxonomy) }}
  {{ end }}
  
  {{ range sort $categories "pages" "desc" }}
    <li class="nav__item nav__item--folder">
      <button class="btn btn--collapse">
        <i class="bi bi-list"></i>
        <span>{{ .name }}</span>
      </button>
      <ul class="nav__list nav__list--collapse">
        {{ range .taxonomy }}
          <li class="nav__item nav__item--file">
            <a class="nav__link" href="{{ .Permalink }}">
              <i class="bi bi-file-earmark-text"></i>
              <span>{{ .Title }}</span>
            </a>
          </li>
        {{ end }}
      </ul>
    </li>
  {{ end }}
{{ end }}
<!-- CATEGORIES -->

<!-- TAGS -->
{{ define "tags_list" }}
  {{ range sort .Site.Taxonomies.tags "Pages" "desc" }}
    <li class="nav__item flex-justify-between">
      <a class="nav__link" href="{{ .Page.RelPermalink }}">
        <i class="bi bi-tags"></i>
        <span>{{ .Page.Title }}</span>
      </a>
      <span>[({{ len .Pages }})]</span>
    </li>
  {{ end }}
{{ end }}
<!-- TAGS -->

<!-- GROUPS -->
{{ define "groups_list" }}
  {{ $groups := slice }}
  
  {{ range $name, $taxonomy := .Site.Taxonomies.group }}
    {{ $groups = $groups | append (dict "name" $name "pages" (len $taxonomy) "taxonomy" $taxonomy) }}
  {{ end }}
  
  {{ range sort $groups "pages" "desc" }}
    <li class="nav__item nav__item--folder">
      <button class="btn btn--collapse">
        <i class="bi bi-collection"></i>
        <span>{{ .name }}</span>
      </button>
      <ul class="nav__list nav__list--collapse">
        {{ range .taxonomy }}
          <li class="nav__item nav__item--file">
            <a class="nav__link" href="{{ .Permalink }}">
              <i class="bi bi-file-earmark-text"></i>
              <span>{{ .Title }}</span>
            </a>
          </li>
        {{ end }}
      </ul>
    </li>
  {{ end }}
{{ end }}
<!-- GROUPS -->

<!-- PINNED -->
{{ define "pinned_list" }}
  {{ range where .Site.RegularPages "Params.pinned" true }}
    <li class="nav__list">
      <a class="nav__link" href="{{ .RelPermalink }}">{{ .Title }}</a>
    </li>
  {{ end }}
{{ end }}
<!-- PINNED -->

<!-- SECTION NAV -->
{{ define "section_navigation" }}
  {{ if .Pages }}
    {{ range .Pages }}
      {{ if .IsSection }}
        <li class="nav__item">
          <a class="nav__link" href="{{ .RelPermalink }}">
            <i class="bi bi-folder2"></i>
            <span>{{ .LinkTitle }}</span>
          </a>
          <ul class="nav__list">
            {{ template "section_navigation" . }}
          </ul>
        </li>
      {{ end }}
    {{ end }}
    {{ range .Pages }}
      {{ if .IsPage }}
        <li class="nav__item">
          <a class="nav__link" href="{{ .RelPermalink }}">
            <i class="bi bi-file-earmark-text"></i>
            <span>{{ .LinkTitle }}</span>
          </a>
        </li>
      {{ end }}
    {{ end }}
  {{ end }}
{{ end }}
<!-- SECTION NAV -->
